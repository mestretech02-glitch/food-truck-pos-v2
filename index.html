<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Truck Manager Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #1a2332; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .navbar { background: #0f1419; border-bottom: 2px solid #ff8c00; padding: 1rem 2rem; display: flex; align-items: center; gap: 2rem; overflow-x: auto; }
        .logo { font-size: 1.8rem; font-weight: bold; color: #ff8c00; white-space: nowrap; }
        .nav-tabs { display: flex; gap: 0.5rem; flex-wrap: nowrap; overflow-x: auto; }
        .nav-tab { padding: 0.6rem 1.2rem; background: #2a3f5f; border: none; color: #fff; cursor: pointer; border-radius: 4px; transition: all 0.3s; white-space: nowrap; font-size: 0.9rem; }
        .nav-tab.active { background: #ff8c00; color: #000; font-weight: bold; }
        .nav-tab:hover { background: #ff8c00; color: #000; }
        .container { padding: 2rem; max-width: 1600px; margin: 0 auto; }
        .section { display: none; }
        .section.active { display: block; }
        .section-title { font-size: 2rem; color: #ff8c00; margin-bottom: 2rem; font-weight: bold; }
        .sub-tabs { display: flex; gap: 1rem; border-bottom: 2px solid #2a3f5f; margin-bottom: 2rem; }
        .sub-tab { padding: 0.8rem 1.5rem; background: none; border: none; color: #999; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; }
        .sub-tab.active { color: #ff8c00; border-bottom-color: #ff8c00; }
        .sub-section { display: none; }
        .sub-section.active { display: block; }
        .btn-primary { padding: 0.8rem 1.5rem; background: #ff8c00; border: none; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; transition: all 0.3s; }
        .btn-primary:hover { background: #ffb84d; }
        .btn-secondary { padding: 0.8rem 1.5rem; background: #3a4f6f; border: none; color: #fff; border-radius: 4px; cursor: pointer; }
        .btn-danger { padding: 0.4rem 0.8rem; background: #ff4444; border: none; color: #fff; border-radius: 4px; cursor: pointer; font-size: 0.9rem; }
        .btn-success { padding: 0.4rem 0.8rem; background: #4ade80; border: none; color: #000; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .input-field { width: 100%; padding: 0.8rem; background: #2a3f5f; border: 1px solid #3a4f6f; color: #fff; border-radius: 4px; margin-bottom: 1rem; }
        .input-field::placeholder { color: #666; }
        .grid-products { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1.5rem; }
        .product-card { background: #2a3f5f; padding: 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.3s; text-align: center; }
        .product-card:hover { transform: translateY(-5px); background: #3a4f6f; }
        .product-image { width: 100%; height: 120px; background: #1a2f4f; border-radius: 4px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: #666; font-size: 3rem; }
        .product-name { font-weight: bold; margin-bottom: 0.5rem; }
        .product-price { color: #ff8c00; font-size: 1.2rem; font-weight: bold; }
        .product-profit { color: #888; font-size: 0.85rem; }
        .cart-section { background: #2a3f5f; padding: 1.5rem; border-radius: 8px; }
        .cart-title { font-size: 1.3rem; font-weight: bold; margin-bottom: 1.5rem; }
        .button-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .btn-toggle { padding: 0.6rem 1rem; background: #3a4f6f; border: none; color: #fff; cursor: pointer; border-radius: 4px; transition: all 0.3s; }
        .btn-toggle.active { background: #ff8c00; color: #000; font-weight: bold; }
        .cart-item { background: #1a2f4f; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; }
        .cart-item-name { font-weight: bold; }
        .cart-item-price { color: #ff8c00; font-weight: bold; margin-top: 0.5rem; }
        .cart-item-extras { color: #ffb84d; font-size: 0.9rem; margin-top: 0.3rem; }
        .cart-total { font-size: 1.5rem; font-weight: bold; color: #4ade80; margin: 1.5rem 0; }
        .btn-finish { width: 100%; padding: 1rem; background: #4ade80; border: none; color: #000; font-weight: bold; font-size: 1.1rem; border-radius: 4px; cursor: pointer; transition: all 0.3s; }
        .btn-finish:hover { background: #22c55e; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #2a3f5f; padding: 2rem; border-radius: 8px; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative; }
        .modal-title { font-size: 1.3rem; font-weight: bold; margin-bottom: 1.5rem; }
        .modal-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }
        .checkbox-group { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
        .checkbox-item { display: flex; align-items: center; gap: 0.5rem; }
        .checkbox-item input { cursor: pointer; }
        .checkbox-item label { cursor: pointer; flex: 1; }
        .checkbox-price { color: #4ade80; font-weight: bold; }
        .textarea-field { width: 100%; padding: 0.8rem; background: #1a2f4f; border: 1px solid #3a4f6f; color: #fff; border-radius: 4px; margin-bottom: 1rem; min-height: 100px; font-family: inherit; }
        .modal-buttons { display: flex; gap: 1rem; }
        .btn-cancel { flex: 1; padding: 0.8rem; background: #3a4f6f; border: none; color: #fff; border-radius: 4px; cursor: pointer; }
        .btn-save { flex: 1; padding: 0.8rem; background: #ff8c00; border: none; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; }
        .payment-modal { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .payment-btn { padding: 1.5rem; background: #3a4f6f; border: none; color: #fff; border-radius: 4px; cursor: pointer; font-size: 1rem; transition: all 0.3s; }
        .payment-btn:hover { background: #ff8c00; color: #000; }
        .success-modal { text-align: center; }
        .success-icon { font-size: 4rem; margin-bottom: 1rem; }
        .kitchen-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1.5rem; }
        .order-card { background: #2a3f5f; padding: 1.5rem; border-radius: 8px; border-left: 5px solid #ff8c00; }
        .order-card.expired { border-left-color: #ff4444; background: #3a2f2f; }
        .order-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .order-number { font-size: 1.5rem; font-weight: bold; color: #ff8c00; }
        .order-type { background: #4ade80; color: #000; padding: 0.3rem 0.8rem; border-radius: 4px; font-size: 0.85rem; font-weight: bold; }
        .order-type.delivery { background: #60a5fa; }
        .order-client { color: #ffb84d; font-weight: bold; margin-bottom: 0.5rem; }
        .order-timer { color: #888; font-size: 0.9rem; }
        .order-items { background: #1a2f4f; padding: 1rem; border-radius: 4px; margin: 1rem 0; }
        .order-item { margin-bottom: 0.5rem; }
        .order-item-name { font-weight: bold; }
        .order-item-extra { color: #ffb84d; font-size: 0.9rem; margin-left: 1rem; }
        .order-buttons { display: flex; gap: 0.5rem; }
        .btn-ready { flex: 1; padding: 0.8rem; background: #4ade80; border: none; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; }
        .btn-cancel-order { flex: 1; padding: 0.8rem; background: #3a4f6f; border: none; color: #fff; border-radius: 4px; cursor: pointer; }
        .table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .table th { background: #2a3f5f; padding: 1rem; text-align: left; border-bottom: 2px solid #3a4f6f; }
        .table td { padding: 1rem; border-bottom: 1px solid #2a3f5f; }
        .table tr:hover { background: #2a3f5f; }
        .badge { display: inline-block; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: bold; }
        .badge-success { background: #4ade80; color: #000; }
        .badge-warning { background: #fbbf24; color: #000; }
        .badge-danger { background: #ff4444; color: #fff; }
        .badge-info { background: #60a5fa; color: #fff; }
        .badge-category { background: #a855f7; color: #fff; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .stat-card { background: #2a3f5f; padding: 1.5rem; border-radius: 8px; text-align: center; }
        .stat-label { color: #888; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .stat-value { font-size: 2rem; font-weight: bold; }
        .stat-value.success { color: #4ade80; }
        .stat-value.warning { color: #fbbf24; }
        .stat-value.danger { color: #ff4444; }
        .stat-value.info { color: #60a5fa; }
        .action-buttons { display: flex; gap: 0.5rem; }
        .btn-edit { background: #60a5fa; border: none; color: #fff; padding: 0.4rem 0.8rem; border-radius: 4px; cursor: pointer; }
        .btn-delete { background: #ff4444; border: none; color: #fff; padding: 0.4rem 0.8rem; border-radius: 4px; cursor: pointer; }
        .input-number { width: 80px; padding: 0.4rem; background: #1a2f4f; border: 1px solid #3a4f6f; color: #fff; border-radius: 4px; }
        .layout-main { display: grid; grid-template-columns: 1fr 380px; gap: 2rem; }
        @media (max-width: 1200px) { .layout-main { grid-template-columns: 1fr; } }
        .date-info { color: #888; margin-bottom: 1.5rem; }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <div class="navbar">
        <div class="logo">üçî Food Truck Manager</div>
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('dashboard')">üìä Dashboard</button>
            <button class="nav-tab" onclick="showSection('vendas')">üõí Vendas</button>
            <button class="nav-tab" onclick="showSection('cozinha')">üë®‚Äçüç≥ Cozinha</button>
            <button class="nav-tab" onclick="showSection('clientes')">üë• Clientes</button>
            <button class="nav-tab" onclick="showSection('produtos')">üì¶ Produtos</button>
            <button class="nav-tab" onclick="showSection('combos')">üéÅ Combos</button>
            <button class="nav-tab" onclick="showSection('estoque')">üìã Estoque</button>
            <button class="nav-tab" onclick="showSection('despesas')">üí∏ Despesas</button>
            <button class="nav-tab" onclick="showSection('desperdicio')">üóëÔ∏è Desperd√≠cio</button>
            <button class="nav-tab" onclick="showSection('relatorios')">üìà Relat√≥rios</button>
            <button class="nav-tab" onclick="showSection('configuracoes')">‚öôÔ∏è Configura√ß√µes</button>
        </div>
    </div>

    <div class="container">
        <!-- DASHBOARD -->
        <div id="dashboard" class="section active">
            <h1 class="section-title">üìä Dashboard Di√°rio</h1>
            
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                <button class="btn-primary" onclick="exportarPDF()">‚¨áÔ∏è Salvar como PDF</button>
                <button class="btn-primary" onclick="exportarExcel()">üìä Exportar para Excel</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Faturamento Bruto (Hoje)</div>
                    <div class="stat-value success" id="stat-faturamento">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Lucro L√≠quido (Hoje)</div>
                    <div class="stat-value success" id="stat-lucro">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Desperd√≠cio (Hoje)</div>
                    <div class="stat-value warning" id="stat-desperdicio">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Alertas de Estoque Baixo</div>
                    <div class="stat-value danger" id="stat-alertas">0</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                <div class="cart-section">
                    <div class="cart-title">Pedidos na Cozinha</div>
                    <div id="dashboard-cozinha" style="min-height: 200px;">
                        <p style="color: #888;">Nenhum pedido pendente</p>
                    </div>
                </div>
                <div class="cart-section">
                    <div class="cart-title">Vendas por Pagamento (Hoje)</div>
                    <canvas id="chartPagamento" style="max-height: 300px;"></canvas>
                </div>
            </div>

            <div class="cart-section">
                <div class="cart-title">Hist√≥rico de Vendas (Hoje)</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Pedido</th>
                            <th>Cliente</th>
                            <th>Produtos</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="dashboard-vendas">
                        <tr><td colspan="5" style="text-align: center; color: #888;">Nenhuma venda realizada</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- VENDAS -->
        <div id="vendas" class="section">
            <h1 class="section-title">üõí Vendas</h1>
            
            <div class="sub-tabs">
                <button class="sub-tab active" onclick="showSubTab('nova-venda', this)">Nova Venda</button>
                <button class="sub-tab" onclick="showSubTab('historico-vendas', this)">Hist√≥rico de Vendas</button>
            </div>

            <!-- NOVA VENDA -->
            <div id="nova-venda" class="sub-section active">
                <div class="layout-main">
                    <div>
                        <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: #ff8c00;">Nova Venda</h2>
                        <div class="grid-products" id="grid-produtos">
                            <!-- Produtos ser√£o inseridos aqui -->
                        </div>
                    </div>

                    <div class="cart-section">
                        <div class="cart-title">Carrinho de Compras</div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Tipo de Pedido</label>
                            <div class="button-group">
                                <button class="btn-toggle active" onclick="setTipoPedido('local', this)">Local</button>
                                <button class="btn-toggle" onclick="setTipoPedido('viagem', this)">Para Viagem</button>
                            </div>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Origem</label>
                            <div class="button-group">
                                <button class="btn-toggle active" onclick="setOrigem('local', this)">Venda Local</button>
                                <button class="btn-toggle" onclick="setOrigem('ifood', this)">iFood</button>
                            </div>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Nome do Cliente</label>
                            <input type="text" class="input-field" id="cliente-nome" placeholder="Buscar ou Adicionar Cliente">
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">WhatsApp</label>
                            <input type="text" class="input-field" id="cliente-whatsapp" placeholder="Opcional">
                        </div>

                        <div id="cart-items" style="margin-bottom: 1.5rem; max-height: 400px; overflow-y: auto;">
                            <!-- Itens do carrinho -->
                        </div>

                        <div class="cart-total">
                            Total: <span id="cart-total">R$ 0,00</span>
                        </div>

                        <button class="btn-finish" onclick="finalizarVenda()">‚úì Finalizar Venda</button>
                    </div>
                </div>
            </div>

            <!-- HIST√ìRICO DE VENDAS -->
            <div id="historico-vendas" class="sub-section">
                <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: #ff8c00;">Hist√≥rico de Vendas</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Pedido</th>
                            <th>Cliente</th>
                            <th>Produtos</th>
                            <th>Total</th>
                            <th>Pagamento</th>
                            <th>Data/Hora</th>
                        </tr>
                    </thead>
                    <tbody id="historico-table">
                        <tr><td colspan="6" style="text-align: center; color: #888;">Nenhuma venda realizada</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- COZINHA -->
        <div id="cozinha" class="section">
            <h1 class="section-title">üë®‚Äçüç≥ Pedidos na Cozinha</h1>
            <div style="text-align: right; margin-bottom: 1rem; color: #888;">Pendentes: <span id="cozinha-pendentes">0</span></div>
            
            <div class="kitchen-grid" id="kitchen-orders">
                <p style="color: #888;">Nenhum pedido pendente</p>
            </div>
        </div>

        <!-- CLIENTES -->
        <div id="clientes" class="section">
            <h1 class="section-title">üë• Clientes</h1>
            <button class="btn-primary" onclick="openClienteModal()">+ Novo Cliente</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>Email</th>
                        <th>Pedidos</th>
                        <th>Total Gasto</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="clientes-table">
                    <tr><td colspan="6" style="text-align: center; color: #888;">Nenhum cliente cadastrado</td></tr>
                </tbody>
            </table>
        </div>

        <!-- PRODUTOS -->
        <div id="produtos" class="section">
            <h1 class="section-title">üì¶ Produtos</h1>
            <button class="btn-primary" onclick="openProdutoModal()">+ Novo Produto</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Pre√ßo</th>
                        <th>Custo</th>
                        <th>Lucro</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="produtos-table">
                    <tr><td colspan="5" style="text-align: center; color: #888;">Nenhum produto cadastrado</td></tr>
                </tbody>
            </table>
        </div>

        <!-- COMBOS -->
        <div id="combos" class="section">
            <h1 class="section-title">üéÅ Combos</h1>
            <button class="btn-primary" onclick="openComboModal()">+ Novo Combo</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Produtos</th>
                        <th>Pre√ßo</th>
                        <th>Economia</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="combos-table">
                    <tr><td colspan="5" style="text-align: center; color: #888;">Nenhum combo cadastrado</td></tr>
                </tbody>
            </table>
        </div>

        <!-- ESTOQUE -->
        <div id="estoque" class="section">
            <h1 class="section-title">üìã Gerenciar Estoque</h1>
            <button class="btn-primary" onclick="openEstoqueModal()">+ Novo Ingrediente</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Ingrediente</th>
                        <th>Estoque Atual</th>
                        <th>Pre√ßo por Unidade</th>
                        <th>Alerta Estoque Baixo</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="estoque-table">
                    <tr><td colspan="5" style="text-align: center; color: #888;">Nenhum ingrediente cadastrado</td></tr>
                </tbody>
            </table>
        </div>

        <!-- DESPESAS -->
        <div id="despesas" class="section">
            <h1 class="section-title">üí∏ Gerenciar Despesas</h1>
            <div class="date-info" id="data-despesas">27 de outubro de 2025</div>
            <button class="btn-primary" onclick="openDespesaModal()">+ Nova Despesa</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Descri√ß√£o</th>
                        <th>Categoria</th>
                        <th>Valor</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="despesas-table">
                    <tr><td colspan="4" style="text-align: center; color: #888;">Nenhuma despesa cadastrada</td></tr>
                </tbody>
            </table>
        </div>

        <!-- DESPERD√çCIO -->
        <div id="desperdicio" class="section">
            <h1 class="section-title">üóëÔ∏è Desperd√≠cio</h1>
            <button class="btn-primary" onclick="openDesperd√≠cioModal()">+ Registrar Desperd√≠cio</button>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Produto/Ingrediente</th>
                        <th>Quantidade</th>
                        <th>Valor</th>
                        <th>Motivo</th>
                        <th>Data</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="desperdicio-table">
                    <tr><td colspan="6" style="text-align: center; color: #888;">Nenhum desperd√≠cio registrado</td></tr>
                </tbody>
            </table>
        </div>

        <!-- RELAT√ìRIOS -->
        <div id="relatorios" class="section">
            <h1 class="section-title">üìà Relat√≥rios</h1>
            
            <div class="cart-section" style="margin-bottom: 2rem;">
                <h2 style="margin-bottom: 1rem;">Filtrar Per√≠odo</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem;">Data Inicial</label>
                        <input type="date" class="input-field" id="data-inicio">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem;">Data Final</label>
                        <input type="date" class="input-field" id="data-fim">
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Faturamento Bruto</div>
                    <div class="stat-value success" id="rel-faturamento">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">CMV (Custo)</div>
                    <div class="stat-value info" id="rel-cmv">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Despesas</div>
                    <div class="stat-value danger" id="rel-despesas">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Desperd√≠cio</div>
                    <div class="stat-value warning" id="rel-desperdicio">R$ 0,00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Lucro L√≠quido</div>
                    <div class="stat-value success" id="rel-lucro">R$ 0,00</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
                <div class="cart-section">
                    <h2 style="margin-bottom: 1rem;">Evolu√ß√£o Financeira por Dia</h2>
                    <canvas id="chartEvolucao" style="max-height: 300px;"></canvas>
                </div>
                <div class="cart-section">
                    <h2 style="margin-bottom: 1rem;">Top 5 Produtos (por Quantidade)</h2>
                    <canvas id="chartTop5" style="max-height: 300px;"></canvas>
                </div>
            </div>
        </div>

        <!-- CONFIGURA√á√ïES -->
        <div id="configuracoes" class="section">
            <h1 class="section-title">‚öôÔ∏è Configura√ß√µes</h1>
            
            <div class="cart-section" style="max-width: 600px;">
                <h2 style="margin-bottom: 1.5rem;">Taxas da M√°quina de Cart√£o</h2>
                
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Taxa de D√©bito (%)</label>
                    <input type="number" class="input-field" id="taxa-debito" value="1.9" step="0.1">
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Taxa de Cr√©dito (%)</label>
                    <input type="number" class="input-field" id="taxa-credito" value="4.5" step="0.1">
                </div>

                <button class="btn-primary" onclick="salvarConfiguracoes()">Salvar</button>
            </div>

            <div class="cart-section" style="max-width: 600px; margin-top: 2rem;">
                <h2 style="margin-bottom: 1.5rem;">Adicionais</h2>
                
                <div id="adicionais-list" style="margin-bottom: 1.5rem;">
                    <!-- Adicionais ser√£o listados aqui -->
                </div>

                <div style="display: flex; gap: 0.5rem;">
                    <input type="text" class="input-field" id="novo-adicional-nome" placeholder="Nome do Adicional" style="flex: 1; margin-bottom: 0;">
                    <input type="number" class="input-field" id="novo-adicional-preco" placeholder="Pre√ßo (R$)" step="0.01" style="width: 150px; margin-bottom: 0;">
                    <button class="btn-primary" onclick="adicionarAdicional()" style="padding: 0.8rem; margin-bottom: 0;">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="modalProduto" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modalProduto')">√ó</button>
            <div class="modal-title">Personalizar Produto</div>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Adicionais</label>
                <div class="checkbox-group" id="modal-adicionais">
                    <!-- Adicionais ser√£o inseridos aqui -->
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Observa√ß√µes Adicionais</label>
                <textarea class="textarea-field" id="modal-observacoes" placeholder="Ex: Ponto da carne, sem picles, etc."></textarea>
            </div>

            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal('modalProduto')">Cancelar</button>
                <button class="btn-save" onclick="adicionarAoCarrinho()">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>

    <div id="modalPagamento" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <button class="modal-close" onclick="closeModal('modalPagamento')">√ó</button>
            <div class="modal-title">M√©todo de Pagamento</div>
            
            <div class="payment-modal">
                <button class="payment-btn" onclick="processarPagamento('dinheiro')">üíµ Dinheiro</button>
                <button class="payment-btn" onclick="processarPagamento('debito')">üèß D√©bito</button>
                <button class="payment-btn" onclick="processarPagamento('credito')">üí≥ Cr√©dito</button>
                <button class="payment-btn" onclick="processarPagamento('pix')">üì± PIX</button>
            </div>

            <button class="btn-cancel" style="width: 100%; margin-top: 1rem;" onclick="closeModal('modalPagamento')">Cancelar</button>
        </div>
    </div>

    <div id="modalSucesso" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <div class="success-icon">‚úì</div>
            <div class="modal-title">Venda Realizada!</div>
            <div style="margin-bottom: 2rem; color: #888;">
                <p>N√∫mero do Pedido: <strong id="sucesso-numero" style="color: #ff8c00;">-</strong></p>
                <p>Total: <strong id="sucesso-total" style="color: #4ade80;">-</strong></p>
            </div>
            <button class="btn-primary" onclick="closeModal('modalSucesso')">OK</button>
        </div>
    </div>

    <script>
        // DADOS GLOBAIS
        const db = {
            produtos: [
                { id: 1, nome: 'Hamburguer Cl√°ssico', preco: 25.00, custo: 8.00, imagem: 'üçî' },
                { id: 2, nome: 'Hamburguer Especial', preco: 35.00, custo: 12.00, imagem: 'üçî' },
                { id: 3, nome: 'Churrasc√£o de Alcatra', preco: 15.00, custo: 6.45, imagem: 'üç¢' }
            ],
            adicionais: [
                { id: 1, nome: 'Maionese Temperada', preco: 2.00 },
                { id: 2, nome: 'Farofa', preco: 1.50 },
                { id: 3, nome: 'Queijo Extra', preco: 3.00 },
                { id: 4, nome: 'Bacon Extra', preco: 4.00 },
                { id: 5, nome: 'Sem Cebola', preco: 0.00 }
            ],
            ingredientes: [
                { id: 1, nome: 'P√£o de Hamburguer', estoque: 98, preco: 1.50, alerta: 20 },
                { id: 2, nome: 'Carne de Hamburguer (150g)', estoque: 48, preco: 4.00, alerta: 10 },
                { id: 3, nome: 'Queijo Cheddar', estoque: 1960, preco: 0.08, alerta: 300 },
                { id: 4, nome: 'Alcatra para Churrasco', estoque: 5000, preco: 0.07, alerta: 1000 },
                { id: 5, nome: 'Espeto de madeira', estoque: 200, preco: 0.10, alerta: 50 },
                { id: 6, nome: 'Sal Grosso', estoque: 1000, preco: 0.01, alerta: 200 }
            ],
            vendas: [],
            pedidosCozinha: [],
            despesas: [],
            desperdicio: [],
            clientes: [],
            configuracoes: {
                taxaDebito: 1.9,
                taxaCredito: 4.5
            }
        };

        let carrinho = [];
        let tipoPedido = 'local';
        let origem = 'local';
        let produtoSelecionado = null;

        // FUN√á√ïES PRINCIPAIS
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (sectionId === 'vendas') renderizarProdutos();
            if (sectionId === 'cozinha') renderizarCozinha();
            if (sectionId === 'produtos') renderizarProdutos();
            if (sectionId === 'estoque') renderizarEstoque();
            if (sectionId === 'despesas') renderizarDespesas();
            if (sectionId === 'relatorios') renderizarRelatorios();
            if (sectionId === 'configuracoes') renderizarConfiguracoes();
            if (sectionId === 'dashboard') renderizarDashboard();
        }

        function showSubTab(tabId, element) {
            const parent = element.parentElement;
            parent.querySelectorAll('.sub-section').forEach(s => s.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            parent.parentElement.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
        }

        function renderizarProdutos() {
            const grid = document.getElementById('grid-produtos');
            if (!grid) return;
            
            grid.innerHTML = db.produtos.map(p => `
                <div class="product-card" onclick="selecionarProduto(${p.id})">
                    <div class="product-image">${p.imagem}</div>
                    <div class="product-name">${p.nome}</div>
                    <div class="product-price">R$ ${p.preco.toFixed(2)}</div>
                    <div class="product-profit">Lucro R$ ${(p.preco - p.custo).toFixed(2)}</div>
                </div>
            `).join('');

            const table = document.getElementById('produtos-table');
            if (table) {
                table.innerHTML = db.produtos.map(p => `
                    <tr>
                        <td>${p.nome}</td>
                        <td>R$ ${p.preco.toFixed(2)}</td>
                        <td>R$ ${p.custo.toFixed(2)}</td>
                        <td>R$ ${(p.preco - p.custo).toFixed(2)}</td>
                        <td class="action-buttons">
                            <button class="btn-edit" onclick="editarProduto(${p.id})">‚úèÔ∏è</button>
                            <button class="btn-delete" onclick="deletarProduto(${p.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `).join('');
            }
        }

        function selecionarProduto(produtoId) {
            produtoSelecionado = db.produtos.find(p => p.id === produtoId);
            const modal = document.getElementById('modalProduto');
            modal.querySelector('.modal-title').textContent = `Personalizar ${produtoSelecionado.nome}`;
            
            const adicionaisDiv = document.getElementById('modal-adicionais');
            adicionaisDiv.innerHTML = db.adicionais.map((a, i) => `
                <div class="checkbox-item">
                    <input type="checkbox" id="adicional-${a.id}">
                    <label for="adicional-${a.id}">${a.nome}</label>
                    <span class="checkbox-price">R$ ${a.preco.toFixed(2)}</span>
                </div>
            `).join('');
            
            openModal('modalProduto');
        }

        function adicionarAoCarrinho() {
            const adicionaisSelecionados = [];
            let precoAdicionais = 0;
            
            db.adicionais.forEach(a => {
                if (document.getElementById(`adicional-${a.id}`)?.checked) {
                    adicionaisSelecionados.push(a.nome);
                    precoAdicionais += a.preco;
                }
            });

            const observacoes = document.getElementById('modal-observacoes').value;

            const item = {
                id: Math.random(),
                produto: produtoSelecionado,
                quantidade: 1,
                adicionais: adicionaisSelecionados,
                observacoes: observacoes,
                precoAdicionais: precoAdicionais,
                precoTotal: produtoSelecionado.preco + precoAdicionais
            };

            carrinho.push(item);
            atualizarCarrinho();
            closeModal('modalProduto');
            document.getElementById('modal-observacoes').value = '';
        }

        function atualizarCarrinho() {
            const cartDiv = document.getElementById('cart-items');
            const totalDiv = document.getElementById('cart-total');

            if (carrinho.length === 0) {
                cartDiv.innerHTML = '<p style="color: #888;">Carrinho vazio</p>';
                totalDiv.textContent = 'R$ 0,00';
                return;
            }

            let total = 0;
            cartDiv.innerHTML = carrinho.map((item, idx) => {
                const subtotal = item.precoTotal * item.quantidade;
                total += subtotal;
                return `
                    <div class="cart-item">
                        <div>
                            <div class="cart-item-name">${item.produto.nome}</div>
                            <div class="cart-item-price">R$ ${item.precoTotal.toFixed(2)}</div>
                            ${item.adicionais.length > 0 ? `<div class="cart-item-extras">+ ${item.adicionais.join(', ')}</div>` : ''}
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="number" value="${item.quantidade}" min="1" onchange="atualizarQuantidade(${idx}, this.value)" class="input-number">
                            <button class="btn-danger" onclick="removerDoCarrinho(${idx})">‚úï</button>
                        </div>
                    </div>
                `;
            }).join('');

            totalDiv.textContent = `R$ ${total.toFixed(2)}`;
        }

        function atualizarQuantidade(idx, qtd) {
            carrinho[idx].quantidade = parseInt(qtd) || 1;
            atualizarCarrinho();
        }

        function removerDoCarrinho(idx) {
            carrinho.splice(idx, 1);
            atualizarCarrinho();
        }

        function setTipoPedido(tipo, element) {
            tipoPedido = tipo;
            element.parentElement.querySelectorAll('.btn-toggle').forEach(b => b.classList.remove('active'));
            element.classList.add('active');
        }

        function setOrigem(o, element) {
            origem = o;
            element.parentElement.querySelectorAll('.btn-toggle').forEach(b => b.classList.remove('active'));
            element.classList.add('active');
        }

        function finalizarVenda() {
            if (carrinho.length === 0) {
                alert('Carrinho vazio!');
                return;
            }

            const nome = document.getElementById('cliente-nome').value || 'Cliente An√¥nimo';
            const whatsapp = document.getElementById('cliente-whatsapp').value || '';

            openModal('modalPagamento');
        }

        function processarPagamento(metodo) {
            const nome = document.getElementById('cliente-nome').value || 'Cliente An√¥nimo';
            const whatsapp = document.getElementById('cliente-whatsapp').value || '';

            let taxaDesconto = 0;
            if (metodo === 'debito') taxaDesconto = db.configuracoes.taxaDebito;
            if (metodo === 'credito') taxaDesconto = db.configuracoes.taxaCredito;

            let total = carrinho.reduce((sum, item) => sum + (item.precoTotal * item.quantidade), 0);
            const taxa = (total * taxaDesconto) / 100;
            const totalComTaxa = total - taxa;

            const venda = {
                id: db.vendas.length + 1,
                cliente: nome,
                whatsapp: whatsapp,
                produtos: carrinho,
                tipoPedido: tipoPedido,
                origem: origem,
                total: total,
                taxa: taxa,
                totalComTaxa: totalComTaxa,
                metodo: metodo,
                data: new Date(),
                status: 'entregue'
            };

            db.vendas.push(venda);

            const pedido = {
                id: venda.id,
                cliente: nome,
                whatsapp: whatsapp,
                produtos: carrinho,
                tipoPedido: tipoPedido,
                origem: origem,
                status: 'pendente',
                tempo: 0,
                data: new Date()
            };

            db.pedidosCozinha.push(pedido);

            closeModal('modalPagamento');
            document.getElementById('sucesso-numero').textContent = `#${venda.id}`;
            document.getElementById('sucesso-total').textContent = `R$ ${totalComTaxa.toFixed(2)}`;
            openModal('modalSucesso');

            carrinho = [];
            document.getElementById('cliente-nome').value = '';
            document.getElementById('cliente-whatsapp').value = '';
            atualizarCarrinho();

            salvarDados();
            renderizarDashboard();
        }

        function renderizarCozinha() {
            const kitchenDiv = document.getElementById('kitchen-orders');
            const pendentes = db.pedidosCozinha.filter(p => p.status === 'pendente');

            document.getElementById('cozinha-pendentes').textContent = pendentes.length;

            if (pendentes.length === 0) {
                kitchenDiv.innerHTML = '<p style="color: #888;">Nenhum pedido pendente</p>';
                return;
            }

            kitchenDiv.innerHTML = pendentes.map(pedido => `
                <div class="order-card ${pedido.tempo > 600 ? 'expired' : ''}">
                    <div class="order-header">
                        <div class="order-number">#${pedido.id}</div>
                        <div class="order-type ${pedido.tipoPedido === 'viagem' ? 'delivery' : ''}">${pedido.tipoPedido === 'viagem' ? 'üì¶ Para Viagem' : 'üè™ Local'}</div>
                    </div>
                    <div class="order-client">${pedido.cliente}</div>
                    <div class="order-timer">‚è±Ô∏è ${formatarTempo(pedido.tempo)}</div>
                    <div class="order-items">
                        ${pedido.produtos.map(p => `
                            <div class="order-item">
                                <div class="order-item-name">1x ${p.produto.nome}</div>
                                ${p.adicionais.length > 0 ? `<div class="order-item-extra">+ ${p.adicionais.join(', ')}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                    <div class="order-buttons">
                        <button class="btn-ready" onclick="marcarPronto(${pedido.id})">‚úì PRONTO</button>
                        <button class="btn-cancel-order" onclick="cancelarPedido(${pedido.id})">üóëÔ∏è Cancelar</button>
                    </div>
                </div>
            `).join('');
        }

        function marcarPronto(pedidoId) {
            const pedido = db.pedidosCozinha.find(p => p.id === pedidoId);
            if (pedido) {
                pedido.status = 'pronto';
                renderizarCozinha();
                salvarDados();
            }
        }

        function cancelarPedido(pedidoId) {
            db.pedidosCozinha = db.pedidosCozinha.filter(p => p.id !== pedidoId);
            renderizarCozinha();
            salvarDados();
        }

        function formatarTempo(segundos) {
            const mins = Math.floor(segundos / 60);
            const secs = segundos % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function renderizarEstoque() {
            const table = document.getElementById('estoque-table');
            table.innerHTML = db.ingredientes.map(ing => `
                <tr>
                    <td>${ing.nome}</td>
                    <td>${ing.estoque} un</td>
                    <td>R$ ${ing.preco.toFixed(2)} / un</td>
                    <td>${ing.alerta} un</td>
                    <td class="action-buttons">
                        <button class="btn-edit" onclick="editarIngrediente(${ing.id})">‚úèÔ∏è</button>
                        <button class="btn-delete" onclick="deletarIngrediente(${ing.id})">üóëÔ∏è</button>
                    </td>
                </tr>
            `).join('');
        }

        function renderizarDespesas() {
            const table = document.getElementById('despesas-table');
            table.innerHTML = db.despesas.map(desp => `
                <tr>
                    <td>${desp.descricao}</td>
                    <td><span class="badge badge-category">${desp.categoria}</span></td>
                    <td>R$ ${desp.valor.toFixed(2)}</td>
                    <td class="action-buttons">
                        <button class="btn-edit" onclick="editarDespesa(${desp.id})">‚úèÔ∏è</button>
                        <button class="btn-delete" onclick="deletarDespesa(${desp.id})">üóëÔ∏è</button>
                    </td>
                </tr>
            `).join('');
        }

        function renderizarDashboard() {
            const hoje = new Date().toDateString();
            const vendasHoje = db.vendas.filter(v => new Date(v.data).toDateString() === hoje);
            
            let faturamento = 0, lucro = 0;
            vendasHoje.forEach(v => {
                faturamento += v.total;
                lucro += (v.totalComTaxa - v.taxa);
            });

            document.getElementById('stat-faturamento').textContent = `R$ ${faturamento.toFixed(2)}`;
            document.getElementById('stat-lucro').textContent = `R$ ${lucro.toFixed(2)}`;
            document.getElementById('stat-desperdicio').textContent = 'R$ 0,00';
            document.getElementById('stat-alertas').textContent = '0';

            // Hist√≥rico
            const historico = document.getElementById('dashboard-vendas');
            if (vendasHoje.length === 0) {
                historico.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #888;">Nenhuma venda realizada</td></tr>';
            } else {
                historico.innerHTML = vendasHoje.map(v => `
                    <tr>
                        <td>#${v.id}</td>
                        <td>${v.cliente}</td>
                        <td>${v.produtos.map(p => p.produto.nome).join(', ')}</td>
                        <td>R$ ${v.totalComTaxa.toFixed(2)}</td>
                        <td><span class="badge badge-success">Entregue</span></td>
                    </tr>
                `).join('');
            }

            // Cozinha
            const cozinhaDiv = document.getElementById('dashboard-cozinha');
            const pendentes = db.pedidosCozinha.filter(p => p.status === 'pendente');
            if (pendentes.length === 0) {
                cozinhaDiv.innerHTML = '<p style="color: #888;">Nenhum pedido pendente</p>';
            } else {
                cozinhaDiv.innerHTML = pendentes.map(p => `
                    <div style="background: #1a2f4f; padding: 1rem; border-radius: 4px; margin-bottom: 0.5rem;">
                        <div style="color: #ff8c00; font-weight: bold;">#${p.id} - ${p.cliente}</div>
                        <div style="color: #888; font-size: 0.9rem;">1x ${p.produtos[0].produto.nome}</div>
                    </div>
                `).join('');
            }
        }

        function renderizarRelatorios() {
            // Implementar gr√°ficos e relat√≥rios
        }

        function renderizarConfiguracoes() {
            document.getElementById('taxa-debito').value = db.configuracoes.taxaDebito;
            document.getElementById('taxa-credito').value = db.configuracoes.taxaCredito;

            const adicionaisList = document.getElementById('adicionais-list');
            adicionaisList.innerHTML = db.adicionais.map(a => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem; background: #1a2f4f; border-radius: 4px; margin-bottom: 0.5rem;">
                    <span>${a.nome} - R$ ${a.preco.toFixed(2)}</span>
                    <button class="btn-delete" onclick="deletarAdicional(${a.id})">üóëÔ∏è</button>
                </div>
            `).join('');
        }

        function salvarConfiguracoes() {
            db.configuracoes.taxaDebito = parseFloat(document.getElementById('taxa-debito').value);
            db.configuracoes.taxaCredito = parseFloat(document.getElementById('taxa-credito').value);
            salvarDados();
            alert('Configura√ß√µes salvas!');
        }

        function adicionarAdicional() {
            const nome = document.getElementById('novo-adicional-nome').value;
            const preco = parseFloat(document.getElementById('novo-adicional-preco').value);

            if (!nome || isNaN(preco)) {
                alert('Preencha todos os campos!');
                return;
            }

            db.adicionais.push({
                id: Math.max(...db.adicionais.map(a => a.id), 0) + 1,
                nome: nome,
                preco: preco
            });

            document.getElementById('novo-adicional-nome').value = '';
            document.getElementById('novo-adicional-preco').value = '';
            renderizarConfiguracoes();
            salvarDados();
        }

        function deletarAdicional(id) {
            db.adicionais = db.adicionais.filter(a => a.id !== id);
            renderizarConfiguracoes();
            salvarDados();
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function openProdutoModal() {
            alert('Adicionar novo produto - em desenvolvimento');
        }

        function openEstoqueModal() {
            alert('Adicionar novo ingrediente - em desenvolvimento');
        }

        function openDespesaModal() {
            alert('Adicionar nova despesa - em desenvolvimento');
        }

        function openClienteModal() {
            alert('Adicionar novo cliente - em desenvolvimento');
        }

        function openComboModal() {
            alert('Adicionar novo combo - em desenvolvimento');
        }

        function openDesperd√≠cioModal() {
            alert('Registrar desperd√≠cio - em desenvolvimento');
        }

        function editarProduto(id) {
            alert('Editar produto - em desenvolvimento');
        }

        function deletarProduto(id) {
            db.produtos = db.produtos.filter(p => p.id !== id);
            renderizarProdutos();
            salvarDados();
        }

        function editarIngrediente(id) {
            alert('Editar ingrediente - em desenvolvimento');
        }

        function deletarIngrediente(id) {
            db.ingredientes = db.ingredientes.filter(i => i.id !== id);
            renderizarEstoque();
            salvarDados();
        }

        function editarDespesa(id) {
            alert('Editar despesa - em desenvolvimento');
        }

        function deletarDespesa(id) {
            db.despesas = db.despesas.filter(d => d.id !== id);
            renderizarDespesas();
            salvarDados();
        }

        function exportarPDF() {
            alert('Exportar PDF - em desenvolvimento');
        }

        function exportarExcel() {
            alert('Exportar Excel - em desenvolvimento');
        }

        function salvarDados() {
            localStorage.setItem('foodTruckDB', JSON.stringify(db));
        }

        function carregarDados() {
            const dados = localStorage.getItem('foodTruckDB');
            if (dados) {
                Object.assign(db, JSON.parse(dados));
            }
        }

        // INICIALIZA√á√ÉO
        window.addEventListener('load', () => {
            carregarDados();
            renderizarProdutos();
            renderizarDashboard();
            
            // Atualizar cron√¥metro da cozinha
            setInterval(() => {
                db.pedidosCozinha.forEach(p => {
                    if (p.status === 'pendente') p.tempo++;
                });
                if (document.getElementById('cozinha').classList.contains('active')) {
                    renderizarCozinha();
                }
            }, 1000);
        });
    </script>
</body>
</html>
